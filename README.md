# Настройка и использование Mailhog для тестирования отправки писем

## О Mailhog

Mailhog - это инструмент для перехвата и тестирования отправки электронной почты в вашем приложении. Он позволяет:
- Перехватывать все исходящие электронные письма без их реальной отправки
- Просматривать содержимое писем через веб-интерфейс
- Тестировать шаблоны писем и обработку отправки в вашем приложении

## Установка и запуск

### Запуск с помощью Docker

1. Убедитесь, что у вас установлен Docker
2. Загрузите образ Mailhog:
   ```
   docker pull mailhog/mailhog
   ```
3. Запустите контейнер:
   ```
   docker run -d --name mailhog -p 1025:1025 -p 8025:8025 mailhog/mailhog
   ```

## Конфигурация проекта

### Настройка бэкенда (Django)

Настройки для отправки почты через Mailhog добавлены в файл `getter/getter/settings.py`:

```python
# Настройки для отправки электронной почты через Mailhog
EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'
EMAIL_HOST = 'localhost'  # Mailhog работает локально
EMAIL_PORT = 1025  # Стандартный SMTP порт Mailhog
EMAIL_USE_TLS = False
EMAIL_USE_SSL = False
EMAIL_HOST_USER = ''
EMAIL_HOST_PASSWORD = ''
DEFAULT_FROM_EMAIL = 'test@example.com'
```

### Интеграция с фронтендом

В профиле пользователя добавлен интерфейс для тестирования отправки писем разных типов:
- Приветственное письмо
- Письмо для сброса пароля
- Подтверждение заказа

## Использование

1. Запустите Mailhog с помощью Docker (см. выше)
2. Запустите бэкенд и фронтенд вашего приложения
3. Перейдите на страницу профиля пользователя
4. Воспользуйтесь кнопками в разделе "Тестирование отправки писем"
5. Просмотрите отправленные письма в веб-интерфейсе Mailhog по адресу: http://localhost:8025

## API для тестирования отправки писем

Backend предоставляет специальный эндпоинт для тестирования отправки писем:

```
POST /users/test-email/
```

Параметры:
- `email_type`: тип отправляемого письма ('welcome', 'password_reset', 'order')

Аутентификация: требуется JWT-токен

## Отключение для продакшена

Перед деплоем в продакшен необходимо заменить настройки EMAIL в Django-проекте на реальные настройки SMTP-сервера. 